<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Validação de Dados</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f4f4f4; padding: 20px; }
    .form-container { background: white; padding: 20px; border-radius: 8px; max-width: 500px; margin: auto; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    label { display: block; margin-top: 15px; }
    input { width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ccc; border-radius: 4px; }
    input.invalid { border-color: red; }
    .error { color: red; font-size: 0.9em; display: none; }
    button { margin-top: 20px; padding: 10px 20px; background: #0078d4; color: white; border: none; border-radius: 4px; cursor: pointer; }
    button:hover { background: #005a9e; }
  </style>
</head>
<body>

<div class="form-container">
  <h2>Validação de Cadastro</h2>
  
  <label for="cpf">CPF:</label>
  <input type="text" id="cpf" placeholder="Somente números" maxlength="11">
  <div id="cpf-error" class="error">CPF inválido.</div>

  <label for="telefone">Telefone:</label>
  <input type="text" id="telefone" placeholder="Ex: 11999999999" maxlength="11">
  <div id="tel-error" class="error">Telefone inválido. Use DDD + número (10 ou 11 dígitos).</div>

  <button onclick="buscarDados()">Buscar</button>

  <div id="resultado" style="display:none;">
    <label for="nome">Nome:</label>
    <input type="text" id="nome">

    <label for="endereco">Endereço:</label>
    <input type="text" id="endereco">

    <label for="banco">Banco:</label>
    <input type="text" id="banco">

    <label for="pix">Chave PIX:</label>
    <input type="text" id="pix">

    <button onclick="confirmar()">Confirmar</button>
  </div>
</div>

<script>
  // Permite apenas números no input
  document.getElementById("cpf").addEventListener("input", function(e) {
    e.target.value = e.target.value.replace(/\D/g, '');
  });

  document.getElementById("telefone").addEventListener("input", function(e) {
    e.target.value = e.target.value.replace(/\D/g, '');
  });

  function validarCPF(cpf) {
    cpf = cpf.replace(/[^\d]+/g,'');
    if (cpf.length !== 11 || /^(\d)\1+$/.test(cpf)) return false;

    let soma = 0, resto;

    for (let i = 1; i <= 9; i++) soma += parseInt(cpf[i - 1]) * (11 - i);
    resto = (soma * 10) % 11;
    if (resto === 10 || resto === 11) resto = 0;
    if (resto !== parseInt(cpf[9])) return false;

    soma = 0;
    for (let i = 1; i <= 10; i++) soma += parseInt(cpf[i - 1]) * (12 - i);
    resto = (soma * 10) % 11;
    if (resto === 10 || resto === 11) resto = 0;
    if (resto !== parseInt(cpf[10])) return false;

    return true;
  }

  function validarTelefone(telefone) {
    return telefone.length === 10 || telefone.length === 11;
  }

  function buscarDados() {
    const cpf = document.getElementById("cpf").value;
    const tel = document.getElementById("telefone").value;

    const cpfValid = validarCPF(cpf);
    const telValid = validarTelefone(tel);

    document.getElementById("cpf").classList.toggle("invalid", !cpfValid);
    document.getElementById("cpf-error").style.display = cpfValid ? "none" : "block";

    document.getElementById("telefone").classList.toggle("invalid", !telValid);
    document.getElementById("tel-error").style.display = telValid ? "none" : "block";

    if (!cpfValid || !telValid) return;

    // Simulação de dados encontrados
    const encontrado = (cpf === "12345678909" && tel === "11999999999");

    document.getElementById("resultado").style.display = "block";

    if (encontrado) {
      document.getElementById("nome").value = "Pedro Miguel";
      document.getElementById("endereco").value = "Rua das Rosas, 123";
      document.getElementById("banco").value = "Nubank";
      document.getElementById("pix").value = "pedro@email.com";
    } else {
      document.getElementById("nome").value = "";
      document.getElementById("endereco").value = "";
      document.getElementById("banco").value = "";
      document.getElementById("pix").value = "";
      alert("Dados não encontrados. Preencha manualmente.");
    }
  }

  function confirmar() {
    alert("Dados confirmados com sucesso! (simulação)");
  }
</script>

</body>
</html>
